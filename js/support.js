function countChar(a){var e=a.value.length;$("#spanVal").text("("+e+"/1000)")}function clearForm(){setTimeout(function(){$("#formSubmit").get(0).reset(),$("#inputOther").css("background-color","rgb(255,255,255)"),$("#firstName").css("background-color","rgb(255,255,255)"),$("#inputEmail").css("background-color","rgb(255,255,255)"),$("#inputSubject").css("background-color","rgb(255,255,255)"),$("#spanVal").empty(),$("#fileUpload").empty(),$("#imageHolder").hide("slow"),$("#inputOther").prop("disabled",!0),nameValid=!1,emailValid=!1,subjectValid=!1,textareaValid=!1},2e3)}function hideSubmEr(){setTimeout(function(){$(".sumbit-er-holder").fadeOut("slow")},5e3)}var otherValid=!0,nameValid=!1,emailValid=!1,subjectValid=!1,textareaValid=!1;$("select").on("change",function(){"Other"===this.value?$("#inputOther").prop("disabled",!1):($("#inputOther").prop("disabled",!0),otherValid=!0)}),$("#inputOther").blur(function(){""!=$(this).val()?$("#inputOther").val()&&($("#inputOther").css("background-color","rgba(79, 138, 16, 0.3)"),otherValid=!0):($("#inputOther").css("background-color","rgba(204, 0, 0, 0.3)"),otherValid=!1)}),$("#firstName").blur(function(){""!=$(this).val()?$("#firstName").val()&&($("#firstName").css("background-color","rgba(79, 138, 16, 0.3)"),nameValid=!0):($("#firstName").css("background-color","rgba(204, 0, 0, 0.3)"),nameValid=!1)}),$("#inputEmail").blur(function(){""!=$(this).val()&&/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i.test($(this).val())?($("#inputEmail").css("background-color","rgba(79, 138, 16, 0.3)"),emailValid=!0):($("#inputEmail").css("background-color","rgba(204, 0, 0, 0.3)"),emailValid=!1)}),$("#inputSubject").blur(function(){""!=$(this).val()?$("#inputSubject").val()&&($("#inputSubject").css("background-color","rgba(79, 138, 16, 0.3)"),subjectValid=!0):($("#inputSubject").css("background-color","rgba(204, 0, 0, 0.3)"),subjectValid=!1)}),$("#formTextarea").blur(function(){""!=$(this).val()?$("#formTextarea").val()&&(textareaValid=!0):textareaValid=!1}),$("#spanLogIn").click(function(){$("#modalLogIn").css("display","none"),$(".modal-body").empty()}),$(window).click(function(a){a.target!==$("#modalLogIn")&&($("#modalLogIn").css("display","none"),$(".modal-body").empty())}),$("#fileUpload").on("change",function(){var a=window.URL||window.webkitURL,e=($("#fileUpload"),$("#imageHolder")),o=this.files[0],t="";e.empty(),e.css("display","none"),o||(t+="File not loaded"),o&&(/\.(png|jpeg|jpg)$/i.test(o.name)?function(o){var t=new FileReader;t.onload=function(t){var i=new Image;i.onload=function(){o.name,i.width,i.height,o.type,Math.round(o.size/1024),Math.round(o.size)<=5242880?i.width<=300&&i.height<=300?(e.show("slow"),$("<img />",{src:t.target.result,class:"thumb-image"}).appendTo(e)):(e.show("slow"),$("<div class = er-valid><span>Image width and height should be less than 300px</span></div>").appendTo(e),e.css("background-color","rgba(204, 0, 0, 0.3)")):(e.show("slow"),$("<div class = er-valid><span>Image size should be less than 5MB</span></div>").appendTo(e),e.css("background-color","rgba(204, 0, 0, 0.3)"))},i.src=a.createObjectURL(o)},t.readAsDataURL(o)}(o):t=t+'".'+o.name.substring(o.name.lastIndexOf(".")+1).toLowerCase()+'" Unsupported Image extension\n'),t&&(e.show("slow"),$("<div class = er-valid><span>"+t+"</span></div>").appendTo(e),e.css("background-color","rgba(204, 0, 0, 0.3)"))}),$("#submitButton").on("click",function(a){if(otherValid&&nameValid&&emailValid&&subjectValid&&textareaValid){a.preventDefault();var e=new FormData($("#formSubmit")[0]);$.ajax({type:"POST",url:"http://504080.com/api/v1/support",enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,timeout:6e5,data:e,success:function(a){$("#modalLogIn").css("display","block"),$("<h3>"+a.data.message+"</h3>").appendTo(".modal-body"),clearForm()},error:function(a){$("#modalLogIn").css("display","block"),$(".modal-footer").css("background-color","#CC0000"),$("<p>Status: "+a.status+"</p>").appendTo(".modal-body"),$("<p>Message: "+a.responseJSON.error.message+"</p>").appendTo(".modal-body"),$("<p>Description: "+a.responseJSON.error.description+"</p>").appendTo(".modal-body")},headers:{Authorization:"7494c41a174ae6d850496cf47fa2ee5acb29f467"},crossDomain:!0})}else $(".sumbit-er-holder").fadeIn("slow",hideSubmEr)});